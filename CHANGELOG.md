# 更新日志

本项目采用语义化版本，遵循 Keep a Changelog 的结构。

## [0.2.0] - 2025-12-28

### 🎯 重大更新：完整的主题系统重构

#### ✨ 新增功能
- **多变体支持**：实现 Tokyo Night、Tokyo Night Storm、Tokyo Night Light 三个完整变体
- **智能主题切换**：支持根据系统偏好自动切换深色/浅色模式
- **编辑器优先设计**：实现侧边栏低调、编辑区域突出的视觉层次
- **完整的组件系统**：统一的按钮、输入框、模态框、表格样式
- **动画系统**：平滑的过渡效果和微交互，支持用户动画偏好设置
- **无障碍设计**：符合 WCAG AA 标准的对比度和焦点指示器

#### 🏗️ 架构改进
- **模块化设计**：将主题系统拆分为独立的功能模块
  - `ThemeVariantManager`: 主题变体管理和切换
  - `VisualHierarchyController`: 视觉层次控制
  - `TypographySystem`: 排版和间距系统
  - `AnimationSystem`: 动画和过渡效果
  - `SemanticColorManager`: 语义颜色管理
  - `UIComponentStyleManager`: UI 组件样式管理
  - `SidebarStyleManager`: 侧边栏专用样式
- **错误处理系统**：完整的错误恢复和降级机制
- **系统集成**：与 Orca Notes API 的深度集成

#### 🎨 设计系统
- **正宗 Tokyo Night 配色**：使用官方颜色规范
  - Night: 最暗变体 (#1a1b26 背景)
  - Storm: 中等深度 (#24283b 背景)  
  - Light: 明亮变体 (#e6e7ed 背景)
- **语义颜色系统**：统一的错误、警告、成功、信息色彩
- **视觉层次优化**：编辑器区域高对比度，侧边栏 85% 透明度
- **微妙的交互反馈**：悬停、选中、焦点状态的精细调整

#### 🧪 测试和质量保证
- **180+ 测试用例**：覆盖所有核心功能和边界情况
- **属性基础测试**：使用 fast-check 进行属性验证
- **10个正确性属性**：确保主题行为的一致性和正确性
- **错误场景测试**：全面的错误处理和恢复测试
- **跨变体一致性**：验证所有变体间的行为一致性

#### 📦 构建和部署
- **静态 CSS 生成**：为每个变体生成独立的 CSS 文件
- **演示页面**：完整的主题效果展示页面 (demo.html)
- **部署指南**：详细的安装和配置说明
- **开发工具**：自动化的 CSS 生成和验证脚本

#### 📚 文档和规格
- **完整的规格文档**：需求、设计、任务三层文档体系
- **EARS 模式需求**：7个主要需求，35个验收标准
- **技术设计文档**：详细的架构和实现说明
- **14个实现任务**：从基础到集成的完整开发计划

#### 🔧 开发体验
- **TypeScript 支持**：完整的类型定义和接口
- **模块化导入**：支持按需加载和树摇优化
- **开发模式**：实时重载和调试支持
- **性能优化**：CSS 变量、事件委托、内存管理

### 🐛 修复问题
- 修复了主题切换时的状态不一致问题
- 解决了 DOM 操作的内存泄漏
- 修正了无障碍焦点指示器的显示问题
- 优化了动画性能和兼容性

### 🔄 重构内容
- 完全重写了主题系统架构
- 统一了颜色变量命名规范
- 重构了 CSS 生成和管理逻辑
- 优化了组件间的依赖关系

### 📈 性能提升
- CSS 变量切换减少重绘开销
- 事件委托降低内存使用
- 延迟加载非关键功能
- 优化了动画帧率和流畅度

---

## [0.1.3] - 2025-12-20
- 重构：全面移除硬编码 HEX 颜色值，统一使用 CSS 变量管理配色，提升维护性。
- 修复：修正设置模态框、侧边栏及搜索框的背景与文字颜色异常。
- 优化：深度定制日历组件样式，确保年份、月份及日期颜色符合 Tokyo Night 色板，去除不协调的白色元素。
- 优化：调整侧边栏标签栏及输入框的高亮与选中效果，视觉更柔和协调。
- 杂项：清理冗余代码、未使用的脚本及资源文件（如 icon.svg），简化构建流程。

## [0.1.2] - 2025-12-14
- 修复：统一主题 CSS 路径为 `dist/theme.css`，避免 `dist/dist` 造成的 404。
- 优化：插件目录结构对齐参考主题，运行时代码集中于 `dist/`。
- 优化：增强列表标记与编号的可读性，覆盖原生 `::marker`、容器伪元素 `::before`、Tabler Icons。
- 新增：分层配色（无序：青/春绿/洋红；有序：蓝/黄/红）以提升层级辨识度。
- 清理：移除内部列表扫描命令及相关注册，保持主题纯净。
- 构建：新增 `scripts/*` 脚本与 `dist/package.json` 生成；在 `.gitignore` 中忽略 `.deploy/`。

## [0.1.1] - 2025-12-14
- 优化：统一菜单、模态、表格与滚动条样式以贴合 Tokyo Night。
- 修复：移除全局 `.ti` 图标颜色覆盖；保留侧边栏图标语义色，同时统一圆角背景。
- 新增：补充功能色变量映射（成功/警告/危险/信息、链接、选区）。
- 细节：整合 `orca-tune-theme` 与官方示例主题的有益 hack，改善交互与可读性。
- 构建：生成 `dist/index.js` 以供 Orca 安装验证。

## [0.1.0] - 2025-12-10
- 初始发布：Tokyo Night 主题基础配色与主题注册；设置项与国际化支持；基础构建与打包流程。
